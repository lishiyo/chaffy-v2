<!--
<nav-bar animation="nav-title-slide-ios7" class="nav-title-slide-ios7" type="bar-calm" back-button-type="button-icon" back-button-icon="icon ion-arrow-left-c">
-->
<nav-bar animation="nav-title-slide" class="nav-title-slide" type="bar-calm" back-button-type="button-icon" back-button-icon="icon ion-arrow-left-c">
</nav-bar>

<nav-page title="{{room.title}}">

<style>

  .has-footer{
    bottom: 60px  !important;
  }

</style>


  <content
    has-header="true"
    has-footer="true"
    scroll="true"
    padding="true"
    paging="true"
    on-refresh="onRefresh()"
    on-refresh-opening="onRefreshOpening(amount)"
    refresh-complete="refreshComplete"
    animate-nav="true"
    delegate-handle="myScroll"
    id="mainScroll"
    > <!--delegate-handle="myScroll", scroll="true"-->

    <!-- for pull to refresh -->
    <refresher></refresher>
<!--
    <ion-refresher pulling-text="Pull to refresh..." on-refresh="onRefresh()"></ion-refresher>
  -->
  
    <div ng-repeat="message in messages | orderBy:['message.created_at']" type="item-text-wrap">    
      <div class="card item-message" ng-class-odd="'message-odd'" ng-class-even="'message-even'">
        <div class="item-message-header">
          <div class="row">
            <small class="col">{{message.created_by}} | {{message.userAge}}, {{message.userGender}}</small>
            <small class="col text-right">{{message.created_at | date: 'short' }}</small>
          </div>
        </div>
        <div class="item-message-body item-text-wrap" ng-class-odd="'message-odd-body'">
          {{message.content}}
        </div>
      </div>
    </div>
  
  </content>


  <div class="bar bar-footer bar-stable" id="bar-footer-message-box">
    <!--<div class="list list-inset">-->
    <div class="list" id="msgBar">
      <form ui-keypress="{13:'submitAddMessage($event)'}" data-ng-submit="submitAddMessage()" >
      <div id="leftTextarea">
        <!--<label class="item item-input" id="msgLabel">-->
          <textarea placeholder="your message ..." data-ng-model="newMessage" id="mainInput" row="1" style="padding-bottom:0px;"></textarea>  
          </div>     
        <!--</label>-->
        <button class="button button-positive" id="sendBtn">Send</button>
      </form>
    </div>  
    <!--</div>-->
    
  </div>
</nav-page>
